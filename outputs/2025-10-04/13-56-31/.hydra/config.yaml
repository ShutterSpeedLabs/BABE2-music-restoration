dset:
  name: singing_voice
  type: audio
  callable: datasets.singing_voice_datasets.MultiDataset
  path: /scratch/elec/t412-asp/audio_datasets/singing_voice/DAMP-VSEP
  path_csv:
  - /scratch/elec/t412-asp/audio_datasets/singing_voice/OpenSinger/output.csv
  - /scratch/elec/t412-asp/audio_datasets/singing_voice/opencpop/output.csv
  - /scratch/elec/t412-asp/audio_datasets/singing_voice/m4singer/output.csv
  - /scratch/elec/t412-asp/audio_datasets/singing_voice/nus-smc-corpus_48/output.csv
  - /scratch/elec/t412-asp/audio_datasets/singing_voice/CSD/output.csv
  - /scratch/elec/t412-asp/audio_datasets/singing_voice/PJS_corpus_ver1.1/output.csv
  priorities:
  - 0.5
  - 6
  - 1
  - 6
  - 6
  - 2
  overfit: false
  load_len: 552552
  normalize: true
  apply_random_gain: true
  gain_range:
  - -3
  - 3
network:
  name: cqtdiff+
  callable: networks.cqtdiff.Unet_CQT_oct_with_attention
  use_fencoding: false
  use_norm: true
  filter_out_cqt_DC_Nyq: true
  depth: 8
  emb_dim: 256
  Ns:
  - 32
  - 32
  - 64
  - 64
  - 128
  - 128
  - 256
  - 256
  attention_layers:
  - 0
  - 0
  - 0
  - 0
  - 0
  - 0
  - 0
  - 0
  Ss:
  - 2
  - 2
  - 2
  - 2
  - 2
  - 2
  - 2
  - 2
  num_dils:
  - 1
  - 3
  - 4
  - 5
  - 5
  - 6
  - 6
  - 7
  cqt:
    window: kaiser
    beta: 1
    num_octs: 8
    bins_per_oct: 32
  bottleneck_type: res_dil_convs
  num_bottleneck_layers: 1
  attention_dict:
    num_heads: 8
    attn_dropout: 0.0
    bias_qkv: false
    'N': 0
    rel_pos_num_buckets: 32
    rel_pos_max_distance: 64
    use_rel_pos: true
    Nproj: 8
diff_params:
  callable: diff_params.edm.EDM
  sigma_data: 1
  sigma_min: 0.001
  sigma_max: 100
  P_mean: -1.2
  P_std: 1.2
  ro: 10
  ro_train: 10
  Schurn: 5
  Snoise: 1
  Stmin: 0
  Stmax: 50
  aweighting:
    use_aweighting: false
    ntaps: 101
tester:
  do_test: true
  type: blind
  name: tester_blind_bwe
  callable: testing.evaluator.Evaluator
  sampler_callable: testing.sampler_BABE2.BlindSampler
  modes:
  - single_recording
  T: 51
  order: 2
  filter_out_cqt_DC_Nyq: true
  checkpoint: /media/kisna/dataset/Project_Bollywood/audio_restore/pretrained_models/singing_voice_pretrain_44kHz_6s-325kits.pt
  base_checkpoint: None
  evaluation:
    path_dataset: /scratch/elec/t412-asp/audio_datasets/archive_SV/historical_singers
    singer: enrico_caruso
    single_recording: /media/kisna/bkp_data/DeOldify/video_data/proPainterVidOut/HumToMohabbatKarega_DilliKaThug_0/HumToMohabbatKarega_DilliKaThug.wav
    start_s:
    - 20
    segment_length: 262144
    num_segments_batch: 1
    segment_placement: middle
    csv_file: cropped_vocals.csv
    LTAS_init: true
    LTAS_file: /scratch/work/molinee2/projects/BABE2/evaluation/LTAS_male2_train.pt
    LTAS_as_y: true
    num_recordings: 1
    process_complete_mode: Block-Autoregressive
    overlap: 0.1
  unconditional:
    num_samples: 8
    audio_len: 184184
  posterior_sampling:
    xi: 0.5
    xi_round2: 0.4
    lr: 0.1
    rec_distance: l2_sum
    rec_distance_operator: l2_hp
    prior_distance: RED
    weight_rec_loss: 1
    weight_rec_loss_operator: 1
    annealing_y:
      use: true
      use_round2: true
      mode: fixed
      sigma_min: 1
    multibatch:
      n_batch: 1
    grad_clipping: false
    clip_value: 0.5
    data_consistency: false
    compensate_transition: true
    stft_distance:
      mag: false
      use: false
      use_multires: false
      nfft: 2048
    norm: 2
    smoothl1_beta: 1
    SNR_observations: None
    sigma_observations: None
    start_sigma: 10
    start_sigma_round2: 10
    freq_weighting: None
    freq_weighting_filter: sqrt
    normalization: grad_norm
  diff_params:
    same_as_training: false
    sigma_data: 1
    sigma_min: 0.001
    sigma_max: 100
    P_mean: -1.2
    P_std: 1.2
    ro: 13
    ro_train: 13
    Schurn: 10
    Snoise: 1.0
    Stmin: 0
    Stmax: 50
  initialization:
    type: zeros
    sigma_init: 0.01
  sampler: stochastic
  bandwidth_extension:
    sigma_observations: 0.0
    gain_boost: 0
    test_filter_fit: false
    compute_sweep: false
    decimate:
      factor: 1
    filter:
      type: firwin
      fc: 1000
      order: 500
      fir_order: 500
      beta: 1
      ripple: 0.05
      resample:
        fs: 2000
      biquad:
        Q: 0.707
  inpainting:
    gap_length: 1000
    start_gap_idx: None
  comp_sens:
    percentage: 5
  phase_retrieval:
    win_size: 1024
    hop_size: 256
  max_thresh_grads: 1
  type_spec: linear
  declipping:
    SDR: 3
  real_informed_bwe:
    filter:
      fc:
      - 2500
      - 4000
      A:
      - -40
      - -45
    apply_filter_in_observations: false
  REDdiff_schedule:
    type: multiepoch_monotonic_log
    ro: 10
    num_epochs: 2
  distortion:
    distortion_type: tanh
    drive_db: 30
  blind_bwe:
    lr_filter: 10
    num_x_updates_per_step: 1
    num_filter_updates_per_step: 100
    beta_eps: 0
    weight_decay: 0
    clip_grad_norm: 1
    LTAS_fft: 4096
    gain_boost: 0
    sigma_norm: 1
    real_recordings:
      path: /scratch/work/molinee2/datasets/vocal_restoration/chosen
      num_samples: 4
    SNR_observations: None
    compute_sweep: false
    Gain:
      optimize_G: false
    fcmin: 11
    fcmax: nyquist
    Amin: -40
    Amax: 40
    Alim: 80
    NFFT: 4096
    sigma_den_estimate: 0.0
    test_filter:
      fref: 900
      fc_p:
      - 1000
      - 3000
      A_p:
      - 0
      - -20
      - -30
      fc_m:
      - 700
      - 100
      A_m:
      - 0
      - 0
      - 0
    initial_conditions:
      fref: 1000
      fc_p:
      - 1500
      - 2000
      A_p:
      - 0
      - 0
      - -80
      fc_m:
      - 500
      - 50
      A_m:
      - 0
      - 0
      - 80
    optimization:
      max_iter: 100
      grad_clip: 1
      tol:
      - 0.1
      - 0.1
      clamp_fc: true
      clamp_A: true
      block_low_freq: false
      only_negative_Ap: false
      last_slope_fixed: true
      first_slope_fixed: true
  collapse_regularization:
    use: true
    beta: 0.1
    gamma: 1
    lambda_reg: 10
  denoiser:
    callable: networks.denoiser.MultiStage_denoise
    checkpoint: /scratch/work/molinee2/projects/ddpm/blind_bwe_diffusion/experiments_denoiser/pretrained_model/checkpoint_denoiser
    sample_rate_denoiser: 22050
    segment_size: 5
    activation: elu
    use_csff: false
    use_SAM: true
    use_cam: false
    use_fam: false
    use_fencoding: true
    use_tdf: false
    use_alttdfs: false
    num_tfc: 3
    num_stages: 2
    depth: 6
    f_dim: 513
    stft_win_size: 1024
    stft_hop_size: 256
  complete_recording:
    path: /scratch/work/molinee2/datasets/vocal_restoration/transfer_231829_files_e9c6e7d5_separated/htdemucs/WCD-008_17_denoised_lpf/vocals.wav
    use_denoiser: false
    SNR_extra_noise: None
    n_segments_blindstep: 1
    ix_start: 15
    std: 1
    inpaint_DC: false
    inpaint_RG: true
  wandb:
    use: false
    entity: eloimoliner
    project: blind_restoration
    run_name: fc_A
    heavy_log_interval: 10
exp:
  exp_name: 44k_8s
  trainer_callable: training.trainer.Trainer
  lossmlp:
    use: true
    rff_dim: 32
  finetuning: false
  wandb:
    entity: eloimoliner
    project: A-diffusion
  model_dir: None
  optimizer:
    type: adam
    beta1: 0.9
    beta2: 0.999
    eps: 1.0e-08
  lr: 0.0002
  lr_rampup_it: 100
  scheduler_step_size: 60000
  scheduler_gamma: 0.8
  batch: 4
  batch_gpu: 4
  num_workers: 4
  seed: 42
  resume: true
  base_checkpoint: None
  resume_checkpoint: None
  sample_rate: 44100
  audio_len: 262144
  stereo: false
  device: cpu
  use_cqt_DC_correction: false
  ema_rate: 0.9999
  ema_rampup: 10000
  use_grad_clip: true
  max_grad_norm: 1
  restore: false
  checkpoint_id: None
  LTAS:
    calculate: true
    num_batches: 100
    nfft: 4096
    win_length: 4096
    hop_length: 1024
    Noct: 3
logging:
  log: true
  log_interval: 250
  heavy_log_interval: 1000
  save_model: true
  save_interval: 1000
  remove_last_checkpoint: true
  num_sigma_bins: 20
  print_model_summary: false
model_dir: experiments/singing_voice_pretrained
dry_run: false
id: BABE2_restored
device: auto
num_gpus: 1
